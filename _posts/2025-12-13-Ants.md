---
layout: post
title: "Demo: ants, ants, ANTS!"
tags: WebAssembly Go Games
---

**Camera Controls**
```
Click game frame
    Q/E - zoom in/out
    W/A/S/D - pan
```

<iframe src="{{ site.baseurl}}/assets/html/ants.html" width="800" height="600"></iframe>

# Ants (again)
[`ants-again`](https://github.com/rafibayer/ants-again) is an ant pheromone simulation written in Go and compiled for WASM using [ebitengine](https://ebitengine.org/).

The 'again' part of the name comes from the fact that this is not my first time attempting to simulate ants in this manner, but it's the first that I'm happy enough with to share.

## What am I looking at?
Each colored speck moving around the screen represents an ant.
- Green ants are 'foraging' ants searching for food
- Lilac ants are 'returning' ants holding food and looking for the hill

The large white circle in the center represents the hill. And the brown bricks scattered about represent food sources.

## Pheromones
If you zoom in a bit (click the game frame, hold Q), you will also notice small fading points left behind by ants of the same color.

These points represent 'pheromones' that are left behind by ants, and fade in strength over time, eventually disappearing. 

Pheromones are the only thing these simulated ants can sense; they are otherwise 'blind' to the world around them. They cannot sense food or the hill directly, and can only interact with them by bumping into them by chance.

![ants and pheromones]({{ site.baseurl }}/images/ants/ants.png)

*ants and some pheromones*

## Discovering paths
Ants have one of two states. They remain in their current state until they accomplish their objective. Foraging ants (green) will become returning ants (lilac) when they encounter food. Returning ants will become foraging ants when they encounter the hill.

Ants drop and sense pheromone according to their state:
- Foragers will drop foraging pheromone and sense returning pheromone
- Returners will drop returning pheromone and sense foraging pheromone

This allows ants to work together to discover paths between the hill and food. When a forager finds food, it becomes a returner. The new returner senses pheromone left by other foragers to find its way back to the hill. As it returns to the hill, it leaves behind returning pheromone that the remaining foragers can follow to find the same food it found. As more and more ants discover the same path, the pheromones they leave behind reinforce the path. Since pheromones fade over time, shorter and busier paths get reinforced, while paths left behind by lost ants fade away.

## Improving ant behavior
Getting the ants to converge on good paths quickly is a product of several tricks and optimizations. Many of these are inspired by real-world ant behavior.

### Pheromone weighting
When an ant senses pheromone, they only consider those in a fairly small area around them. This prevents them from getting distracted by far-away pheromones left by ants collecting other food sources.

In addition, ants are more strongly influenced by nearby pheromones, as well as pheromones that point in a direction more similar to their current heading. 

### Pheromone gradient
These are fairly important behaviors because of the 'pheromone gradient'. As a trail left by an ant starts to decay, the gradient points towards the ant. Pheromones left more recently are stronger, those left several seconds ago are almost gone. Another ant following this trail would then be more likely to follow the gradient, but this is not quite the effect that we want. If a forager follows directly behind a returner, they are likely walking towards the hill, not the food source the returner found. The same applies in reverse.

By applying more weight to closer, and more directionally similar pheromones, we make it more likely that an ant follows the trail in the direction we want.

### Pheromone inventory
To help ants forget bad paths, each ant has a limited 'inventory' of pheromone that they can drop. Once an ant has exhausted their inventory, they can't drop any more pheromone until they accomplish their goal. 

## Pathological outcomes
Finding a good balance between pheromone influence, decay, drop rate, and other parameters is challenging. If poorly selected, several pathological outcomes are possible.

### Non-convergence
If ants are not sensitive enough to pheromones, if pheromones decay too fast, or if ants have a mis-sized sensing radius, it's possible that they fail to effectively converge on a path. In this case, ants continue to wander aimlessly, only sometimes collecting food by random chance.

![non-convergence]({{ site.baseurl }}/images/ants/nonconvergence.png)

### Over-convergence
The opposite scenario is also possible. If ants are over-influenced by pheromone, they will follow paths too strictly, and fail to discover more optimal paths. An even worse failure mode exists where foraging and returning ants create a circular path that does not pass near food or the hill. In that scenario, they may follow each other in an endless loop and never accomplish their goal. This is largely mitigated by having a reasonably small pheromone inventory, but it is still possible that they discover a very long and inefficient path that eventually does result in food collection.

![over-convergence]({{ site.baseurl }}/images/ants/overconvergence.png)


# Implementing and optimizing
ebitengine is an extremely minimal game engine. It exposes a simple interface to run and render games that may look familiar if you've done some game development before. An ebitengine game implements an interface that includes the methods `Update()` and `Draw()`. During `Update`, the game is expected to advance the simulation forward one step. This method is called by the engine every 1/60th of a second. Likewise, during `Draw`, the game is expected to render itself to the screen. This is also called every 60th of a second. 

By separating `Update` and `Draw`, we can implement game-logic and rendering separately. 

## Rendering
I'll touch on this first because it's simpler. My `Draw` function is implemented as a set of loops that iterate over and draw elements of my game to the screen.

For example, `drawAnts`:
```go
func (g *Game) drawAnts() {
    for _, ant := range g.ants {
        // `tail` point 5 units opposite the direction the ant is facing (`ant.dir`)
        tail := ant.Add(ant.dir.Normalize().Mul(-5))

        // decide what color the ant should be based on ant.state
        c := GREEN
        if ant.state == RETURN {
            c = LILAC
        }

        // draw a line from ant position to tail. 
        vector.StrokeLine(
            g.world,                            // "world-space"
            float32(ant.X), float32(ant.Y),     // from
            float32(tail.X), float32(tail.Y),   // to
            2, c, false)                        // thickness, color, anti-aliasing
    }
}
```

Food sources and the hill are drawn in a similar manner. Pheromones are a bit different. Because the number of pheromones in the simulation can reach tens-of-thousands depending on parameters, drawing them is performance intensive.

The `vector` drawing package provided by ebitengine is sufficient for most things, but it requires an engine draw call every time it's used. For pheromones we instead maintain a buffer representing every game pixel and render them all at once with a single call.

Using this API, each pixel in the game is represented by 4 bytes, one for each color channel (RGBA). If our game world is 1000x1000 pixels, this means our buffer needs to be `1000*1000*4` bytes, or 4MB. Not too bad.

Full disclosure, this was originally implemented with the help of ChatGPT.
```go
func (g *Game) drawPheromones() {
    // Clear buffer to black (or background color)
    for i := range g.px {
        g.px[i] = 0
    }

    writePheromones := func(ph spatial.Spatial[*Pheromone], color color.RGBA) {
        for pher := range ph.PointsIter() {
            // Fade color by pheromone amount (0..1)
            c := Fade(color, pher.amount)

            x := int(pher.X)
            y := int(pher.Y)

            // don't bother rendering anything outside the bounds of the game
            if x < 0 || x >= GAME_SIZE || y < 0 || y >= GAME_SIZE {
                continue
            }

            idx := 4 * (y*GAME_SIZE + x)
            g.px[idx+0] = c.R
            g.px[idx+1] = c.G
            g.px[idx+2] = c.B
            g.px[idx+3] = 255 // alpha channel
        }
    }

    writePheromones(g.foragingPheromone, DARK_GREEN)
    writePheromones(g.returningPheromone, DARK_LILAC)

    // Write the pixel buffer to the ebiten.Image once
    g.world.WritePixels(g.px)
}
```

I also left an unused `naiveDrawPheromones` function in the source code that is implemented like our other `draw` functions. It does work well enough for smaller simulation sizes.

### Camera

I achieved the camera zoom/panning behavior by representing the game as a sub-image. When you adjust the camera, we update the transform applied to the game sub-image before drawing it to the screen. That also makes it easy to draw game elements in "world-space" without worrying about the "screen-space" size changing if I update the resolution or window size of the game. 

That's... pretty much it for rendering. 

## Simulation

The `Update` function takes a similar approach to `Draw`. Each element of the game has a loop in it that iterates over game elements and advances their state by a step.

### Ants

```go

func (g *Game) updateAnts() {
    for _, ant := range g.ants {
        // move the ant forward
        ant.Vector = ant.Add(ant.dir.Normalize().Mul(float64(g.params.AntSpeed)))

        // prevent the ant from escaping the boundary of the game
        keepInbounds(ant)

        if util.Chance(g.params.PheromoneSenseProb) {
           // ... smell nearby pheromones, update ant.dir ...
        }

        if ant.state == FORAGE {
            // ... do foraging ant stuff, change to returning ant if we bump food ...
        }

        if ant.state == RETURN {
           // ... do returning ant stuff, change to foraging ant if we bump hill ... 
        }

        if ant.pheromoneStored > 0 && util.Chance(g.params.PheromoneDropProb) {
            // ... drop some pheromone on the ground
        }

        // randomly turn a few degrees
        ant.dir = ant.dir.Rotate(util.Rand(-g.params.AntRotation, g.params.AntRotation))
    }
}
```

### Other elements
Food, pheromone, and hills are less interesting. If food is exhausted, we remove it from the sim. Pheromone decays a bit each tick, we remove it when it reaches 0. The hill doesn't even have an update function, it just sits there.

### Spatial hashing
Lots of our game logic relies on us being able to find elements 'nearby'. With a more heavy-weight game engine, there might be a built-in way to do this, but here we're on our own. Remember that each tick, an ant needs to sense nearby pheromone and compute the impact on direction. If we have 1000 ants, and 10,000 pheromones, computing that the naive way would require a nested loop with 10,000,000 iterations every tick. That is not feasible if our target is running ~60 ticks per second. 

Instead, anything that we need to search an area for is stored in a data structure called a spatial hash. In `ants-again`, pheromone, food sources, and the hill are all stored in spatial hashes. This data structure allows us to quickly find elements in a given area, without checking every single element.

A spatial hash works by storing elements in a set of 'cells'. The 'cell' that an element belongs to is determined by a hash of its position (x,y coordinates) modulus a configurable 'cell size'. If we want to find elements in the spatial hash within a given radius of a point, we only need to search cells that overlap with the circle formed by our point and radius. When we consider a given point, we discard it if the distance is outside of our circle.

![Spatial Hash]({{ site.baseurl }}/images/ants/spatial_hash.png)
*source: [leetless](https://leetless.de/posts/spatial-hashing-vs-ecs/)*

When deciding the cell size, there is a performance tradeoff. Choose too large, and you will have to iterate many elements that end up being discarded. Too small, and you have to search many cells. Generally, your cell size should be similar to the size of the queries you expect to be making.

### Other spatial data structures
Spatial hashes are just one of many [spatial data structures](https://en.wikipedia.org/wiki/Spatial_database#Spatial_index). Each one provides tradeoffs on the performance of inserting, querying, and updating. Early iterations of this project used a KD-Tree instead of a spatial hash, but it proved to be less performant and more complex. The `spatial` package provides the interface used within the game for interacting with spatial data structures. This makes it possible to experiment with alternative implementations.

```go
type Spatial[T vector.Point] interface {
    Insert(p T)
    PointsIter() iter.Seq[T]
    Remove(p T) T
    RadialSearchIter(center vector.Point, radius float64) iter.Seq[T]
    Len() int
}
```

### Profiling
The Go standard-library has a package called `"runtime/pprof"` that makes it easy to collect pprof profiles to analyze CPU, memory, and traces. `go tool pprof` can create graphviz files with the `-dot` flag. I used this pretty extensively to identify CPU hot-spots. Unsurprisingly, garbage collection, and querying our spatial hashes are still by far the most time-consuming parts of our program.

Here is the output from ~30 seconds of simulation. (click to open visualizer)
<a href="https://dreampuf.github.io/GraphvizOnline/?engine=dot#digraph%20%22ants-again.exe%22%20%7B%0D%0Anode%20%5Bstyle%3Dfilled%20fillcolor%3D%22%23f8f8f8%22%5D%0D%0Asubgraph%20cluster_L%20%7B%20%22File%3A%20ants-again.exe%22%20%5Bshape%3Dbox%20fontsize%3D16%20label%3D%22File%3A%20ants-again.exe%5ClBuild%20ID%3A%20C%3A%5C%5CUsers%5C%5CEasy_%5C%5CAppData%5C%5CLocal%5C%5CTemp%5C%5Cgo-build3579508113%5C%5Cb001%5C%5Cexe%5C%5Cants-again.exe2025-12-13%2016%3A09%3A47.478415%20-0800%20PST%5ClType%3A%20cpu%5ClTime%3A%202025-12-13%2016%3A09%3A48%20PST%5ClDuration%3A%2031.21s%2C%20Total%20samples%20%3D%2029.85s%20(95.65%25)%5ClShowing%20nodes%20accounting%20for%2026.60s%2C%2089.11%25%20of%2029.85s%20total%5ClDropped%20264%20nodes%20(cum%20%3C%3D%200.15s)%5ClDropped%2013%20edges%20(freq%20%3C%3D%200.03s)%5ClShowing%20top%2080%20nodes%20out%20of%20116%5Cl%5ClSee%20https%3A%2F%2Fgit.io%2FJfYMW%20for%20how%20to%20read%20the%20graph%5Cl%22%20tooltip%3D%22ants-again.exe%22%5D%20%7D%0D%0AN1%20%5Blabel%3D%22errgroup%5Cn(*Group)%5CnGo%5Cnfunc1%5Cn0%20of%2028.72s%20(96.21%25)%22%20id%3D%22node1%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22golang.org%2Fx%2Fsync%2Ferrgroup.(*Group).Go.func1%20(28.72s)%22%20color%3D%22%23b20200%22%20fillcolor%3D%22%23edd5d5%22%5D%0D%0AN2%20%5Blabel%3D%22runtime%5Cncgocall%5Cn20.04s%20(67.14%25)%5Cnof%2020.07s%20(67.24%25)%22%20id%3D%22node2%22%20fontsize%3D24%20shape%3Dbox%20tooltip%3D%22runtime.cgocall%20(20.07s)%22%20color%3D%22%23b21400%22%20fillcolor%3D%22%23edd8d5%22%5D%0D%0AN3%20%5Blabel%3D%22runtime%5Cnsyscall_syscalln%5Cn0%20of%2020.07s%20(67.24%25)%22%20id%3D%22node3%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22runtime.syscall_syscalln%20(20.07s)%22%20color%3D%22%23b21400%22%20fillcolor%3D%22%23edd8d5%22%5D%0D%0AN4%20%5Blabel%3D%22ui%5Cn(*context)%5CnupdateFrameImpl%5Cn0%20of%209.34s%20(31.29%25)%22%20id%3D%22node4%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*context).updateFrameImpl%20(9.34s)%22%20color%3D%22%23b23400%22%20fillcolor%3D%22%23eddcd5%22%5D%0D%0AN5%20%5Blabel%3D%22ebiten%5Cn(*Image)%5CnDrawImage%5Cn0.16s%20(0.54%25)%5Cnof%203.04s%20(10.18%25)%22%20id%3D%22node5%22%20fontsize%3D10%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).DrawImage%20(3.04s)%22%20color%3D%22%23b28457%22%20fillcolor%3D%22%23ede7e1%22%5D%0D%0AN6%20%5Blabel%3D%22main%5CndrawWorldSpace%5Cn0%20of%204.86s%20(16.28%25)%22%20id%3D%22node6%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22main.drawWorldSpace%20(4.86s)%22%20color%3D%22%23b25e21%22%20fillcolor%3D%22%23ede1d9%22%5D%0D%0AN7%20%5Blabel%3D%22graphicscommand%5Cn(*commandQueue)%5Cnflush%5Cn0%20of%2019.34s%20(64.79%25)%22%20id%3D%22node7%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).flush%20(19.34s)%22%20color%3D%22%23b21500%22%20fillcolor%3D%22%23edd8d5%22%5D%0D%0AN8%20%5Blabel%3D%22thread%5Cn(*OSThread)%5CnLoop%5Cnfunc1%5Cn0%20of%2020.18s%20(67.60%25)%22%20id%3D%22node8%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fthread.(*OSThread).Loop.func1%20(20.18s)%22%20color%3D%22%23b21300%22%20fillcolor%3D%22%23edd8d5%22%5D%0D%0AN9%20%5Blabel%3D%22spatial%5Cn(*Hash%5B*main%5CnPheromone%5D)%5CnRadialSearchIter%5Cn(*Hash%5Bgo%5Cnshape%5Cn*uint8%5D)%5CnRadialSearchIter%5Cnfunc1%5Cn1.27s%20(4.25%25)%5Cnof%202.94s%20(9.85%25)%22%20id%3D%22node9%22%20fontsize%3D13%20shape%3Dbox%20tooltip%3D%22github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Pheromone%5D).RadialSearchIter.(*Hash%5Bgo.shape.*uint8%5D).RadialSearchIter.func1%20(2.94s)%22%20color%3D%22%23b2865a%22%20fillcolor%3D%22%23ede7e1%22%5D%0D%0AN10%20%5Blabel%3D%22thread%5Cn(*OSThread)%5CnLoop%5Cn0%20of%2020.18s%20(67.60%25)%22%20id%3D%22node10%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fthread.(*OSThread).Loop%20(20.18s)%22%20color%3D%22%23b21300%22%20fillcolor%3D%22%23edd8d5%22%5D%0D%0AN11%20%5Blabel%3D%22main%5Cn(*Game)%5CnupdateAnts%5Cn0.01s%20(0.034%25)%5Cnof%204.08s%20(13.67%25)%22%20id%3D%22node11%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22main.(*Game).updateAnts%20(4.08s)%22%20color%3D%22%23b26f38%22%20fillcolor%3D%22%23ede4dc%22%5D%0D%0AN12%20%5Blabel%3D%22syscall%5CnSyscall%5Cn0%20of%2018.53s%20(62.08%25)%22%20id%3D%22node12%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22syscall.Syscall%20(18.53s)%22%20color%3D%22%23b21700%22%20fillcolor%3D%22%23edd8d5%22%5D%0D%0AN13%20%5Blabel%3D%22runtime%5Cnmapaccess2%5Cn0.17s%20(0.57%25)%5Cnof%200.86s%20(2.88%25)%22%20id%3D%22node13%22%20fontsize%3D10%20shape%3Dbox%20tooltip%3D%22runtime.mapaccess2%20(0.86s)%22%20color%3D%22%23b2a998%22%20fillcolor%3D%22%23edebe9%22%5D%0D%0AN14%20%5Blabel%3D%22runtime%5Cnmemmove%5Cn0.92s%20(3.08%25)%22%20id%3D%22node14%22%20fontsize%3D12%20shape%3Dbox%20tooltip%3D%22runtime.memmove%20(0.92s)%22%20color%3D%22%23b2a896%22%20fillcolor%3D%22%23edebe9%22%5D%0D%0AN15%20%5Blabel%3D%22main%5Cn(*Game)%5CndrawPheromones%5Cn0%20of%201.59s%20(5.33%25)%22%20id%3D%22node15%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22main.(*Game).drawPheromones%20(1.59s)%22%20color%3D%22%23b29e82%22%20fillcolor%3D%22%23edeae6%22%5D%0D%0AN16%20%5Blabel%3D%22windows%5Cn(*LazyProc)%5CnCall%5Cn0%20of%200.70s%20(2.35%25)%22%20id%3D%22node16%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22golang.org%2Fx%2Fsys%2Fwindows.(*LazyProc).Call%20(0.70s)%22%20color%3D%22%23b2ab9d%22%20fillcolor%3D%22%23edecea%22%5D%0D%0AN17%20%5Blabel%3D%22graphicscommand%5Cn(*commandQueue)%5CnEnqueueDrawTrianglesCommand%5Cn0.07s%20(0.23%25)%5Cnof%200.77s%20(2.58%25)%22%20id%3D%22node17%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).EnqueueDrawTrianglesCommand%20(0.77s)%22%20color%3D%22%23b2aa9b%22%20fillcolor%3D%22%23edecea%22%5D%0D%0AN18%20%5Blabel%3D%22main%5Cn(*Game)%5CnupdateAnts-range1%5Cn0.48s%20(1.61%25)%5Cnof%200.98s%20(3.28%25)%22%20id%3D%22node18%22%20fontsize%3D11%20shape%3Dbox%20tooltip%3D%22main.(*Game).updateAnts-range1%20(0.98s)%22%20color%3D%22%23b2a795%22%20fillcolor%3D%22%23edebe9%22%5D%0D%0AN19%20%5Blabel%3D%22main%5Cn(*Game)%5CnDraw%5Cn0.01s%20(0.034%25)%5Cnof%205.08s%20(17.02%25)%22%20id%3D%22node19%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22main.(*Game).Draw%20(5.08s)%22%20color%3D%22%23b2591a%22%20fillcolor%3D%22%23ede1d8%22%5D%0D%0AN20%20%5Blabel%3D%22atlas%5Cn(*Image)%5CndrawTriangles%5Cn0.23s%20(0.77%25)%5Cnof%201.27s%20(4.25%25)%22%20id%3D%22node20%22%20fontsize%3D10%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).drawTriangles%20(1.27s)%22%20color%3D%22%23b2a38c%22%20fillcolor%3D%22%23edebe8%22%5D%0D%0AN21%20%5Blabel%3D%22main%5Cn(*Game)%5CnUpdate%5Cn0%20of%204.25s%20(14.24%25)%22%20id%3D%22node21%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22main.(*Game).Update%20(4.25s)%22%20color%3D%22%23b26b33%22%20fillcolor%3D%22%23ede3dc%22%5D%0D%0AN22%20%5Blabel%3D%22spatial%5Cn(*Hash%5B*main%5CnPheromone%5D)%5CnPointsIter%5Cn(*Hash%5Bgo%5Cnshape%5Cn*uint8%5D)%5CnPointsIter%5Cnfunc1%5Cn0.10s%20(0.34%25)%5Cnof%200.60s%20(2.01%25)%22%20id%3D%22node22%22%20fontsize%3D10%20shape%3Dbox%20tooltip%3D%22github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Pheromone%5D).PointsIter.(*Hash%5Bgo.shape.*uint8%5D).PointsIter.func1%20(0.60s)%22%20color%3D%22%23b2aca0%22%20fillcolor%3D%22%23edecea%22%5D%0D%0AN23%20%5Blabel%3D%22windows%5Cn(*Proc)%5CnCall%5Cn0%20of%200.61s%20(2.04%25)%22%20id%3D%22node23%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22golang.org%2Fx%2Fsys%2Fwindows.(*Proc).Call%20(0.61s)%22%20color%3D%22%23b2aca0%22%20fillcolor%3D%22%23edecea%22%5D%0D%0AN24%20%5Blabel%3D%22runtime%5Cnmallocgc%5Cn0.06s%20(0.2%25)%5Cnof%200.36s%20(1.21%25)%22%20id%3D%22node24%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22runtime.mallocgc%20(0.36s)%22%20color%3D%22%23b2afa7%22%20fillcolor%3D%22%23edeceb%22%5D%0D%0AN25%20%5Blabel%3D%22runtime%5Cnmain%5Cn0%20of%200.83s%20(2.78%25)%22%20id%3D%22node25%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22runtime.main%20(0.83s)%22%20color%3D%22%23b2aa99%22%20fillcolor%3D%22%23edece9%22%5D%0D%0AN26%20%5Blabel%3D%22mipmap%5Cn(*Mipmap)%5CnDrawTriangles%5Cn0.12s%20(0.4%25)%5Cnof%201.71s%20(5.73%25)%22%20id%3D%22node26%22%20fontsize%3D10%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fmipmap.(*Mipmap).DrawTriangles%20(1.71s)%22%20color%3D%22%23b29c7f%22%20fillcolor%3D%22%23edeae6%22%5D%0D%0AN27%20%5Blabel%3D%22runtime%5CnmemclrNoHeapPointers%5Cn0.33s%20(1.11%25)%22%20id%3D%22node27%22%20fontsize%3D11%20shape%3Dbox%20tooltip%3D%22runtime.memclrNoHeapPointers%20(0.33s)%22%20color%3D%22%23b2afa8%22%20fillcolor%3D%22%23edeceb%22%5D%0D%0AN28%20%5Blabel%3D%22ebiten%5Cn(*Image)%5CninvokeUsageCallbacks%5Cn0.14s%20(0.47%25)%5Cnof%200.60s%20(2.01%25)%22%20id%3D%22node28%22%20fontsize%3D10%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).invokeUsageCallbacks%20(0.60s)%22%20color%3D%22%23b2aca0%22%20fillcolor%3D%22%23edecea%22%5D%0D%0AN29%20%5Blabel%3D%22buffered%5Cn(*Image)%5CnDrawTriangles%5Cn0.10s%20(0.34%25)%5Cnof%201.50s%20(5.03%25)%22%20id%3D%22node29%22%20fontsize%3D10%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fbuffered.(*Image).DrawTriangles%20(1.50s)%22%20color%3D%22%23b2a085%22%20fillcolor%3D%22%23edeae7%22%5D%0D%0AN30%20%5Blabel%3D%22ui%5Cn(*Image)%5CnDrawTriangles%5Cn0.07s%20(0.23%25)%5Cnof%201.80s%20(6.03%25)%22%20id%3D%22node30%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*Image).DrawTriangles%20(1.80s)%22%20color%3D%22%23b29b7c%22%20fillcolor%3D%22%23edeae5%22%5D%0D%0AN31%20%5Blabel%3D%22restorable%5Cn(*Image)%5CnDrawTriangles%5Cn0.10s%20(0.34%25)%5Cnof%200.97s%20(3.25%25)%22%20id%3D%22node31%22%20fontsize%3D10%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Frestorable.(*Image).DrawTriangles%20(0.97s)%22%20color%3D%22%23b2a895%22%20fillcolor%3D%22%23edebe9%22%5D%0D%0AN32%20%5Blabel%3D%22spatial%5Cn(*Hash%5B*main%5CnFood%5D)%5CnRadialSearchIter%5Cn(*Hash%5Bgo%5Cnshape%5Cn*uint8%5D)%5CnRadialSearchIter%5Cnfunc1%5Cn0.15s%20(0.5%25)%5Cnof%200.40s%20(1.34%25)%22%20id%3D%22node32%22%20fontsize%3D10%20shape%3Dbox%20tooltip%3D%22github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Food%5D).RadialSearchIter.(*Hash%5Bgo.shape.*uint8%5D).RadialSearchIter.func1%20(0.40s)%22%20color%3D%22%23b2afa6%22%20fillcolor%3D%22%23edeceb%22%5D%0D%0AN33%20%5Blabel%3D%22graphics%5CnadjustDestinationPixel%5Cn0.25s%20(0.84%25)%22%20id%3D%22node33%22%20fontsize%3D10%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphics.adjustDestinationPixel%20(0.25s)%22%20color%3D%22%23b2b0ab%22%20fillcolor%3D%22%23edecec%22%5D%0D%0AN34%20%5Blabel%3D%22vector%5CnVector%5CnCosineSimilarity%5Cn0.22s%20(0.74%25)%5Cnof%200.28s%20(0.94%25)%22%20id%3D%22node34%22%20fontsize%3D10%20shape%3Dbox%20tooltip%3D%22github.com%2Frafibayer%2Fants-again%2Fvector.Vector.CosineSimilarity%20(0.28s)%22%20color%3D%22%23b2b0aa%22%20fillcolor%3D%22%23edecec%22%5D%0D%0AN35%20%5Blabel%3D%22main%5Cn(*Game)%5CndrawPheromones%5Cn(*Game)%5CndrawPheromones%5Cnfunc1-range1%5Cn0.23s%20(0.77%25)%5Cnof%200.27s%20(0.9%25)%22%20id%3D%22node35%22%20fontsize%3D10%20shape%3Dbox%20tooltip%3D%22main.(*Game).drawPheromones.(*Game).drawPheromones.func1-range1%20(0.27s)%22%20color%3D%22%23b2b0aa%22%20fillcolor%3D%22%23edecec%22%5D%0D%0AN36%20%5Blabel%3D%22main%5Cn(*Game)%5CndrawAnts%5Cn0.02s%20(0.067%25)%5Cnof%201.95s%20(6.53%25)%22%20id%3D%22node36%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22main.(*Game).drawAnts%20(1.95s)%22%20color%3D%22%23b29878%22%20fillcolor%3D%22%23ede9e5%22%5D%0D%0AN37%20%5Blabel%3D%22syscall%5CnSyscall6%5Cn0%20of%200.32s%20(1.07%25)%22%20id%3D%22node37%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22syscall.Syscall6%20(0.32s)%22%20color%3D%22%23b2b0a8%22%20fillcolor%3D%22%23edeceb%22%5D%0D%0AN38%20%5Blabel%3D%22aeshashbody%5Cn0.22s%20(0.74%25)%22%20id%3D%22node38%22%20fontsize%3D10%20shape%3Dbox%20tooltip%3D%22aeshashbody%20(0.22s)%22%20color%3D%22%23b2b0ab%22%20fillcolor%3D%22%23edecec%22%5D%0D%0AN39%20%5Blabel%3D%22runtime%5Cnstdcall1%5Cn0.18s%20(0.6%25)%22%20id%3D%22node39%22%20fontsize%3D10%20shape%3Dbox%20tooltip%3D%22runtime.stdcall1%20(0.18s)%22%20color%3D%22%23b2b1ad%22%20fillcolor%3D%22%23edecec%22%5D%0D%0AN40%20%5Blabel%3D%22glfw%5CnplatformPollEvents%5Cn0.01s%20(0.034%25)%5Cnof%200.35s%20(1.17%25)%22%20id%3D%22node40%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fglfw.platformPollEvents%20(0.35s)%22%20color%3D%22%23b2afa8%22%20fillcolor%3D%22%23edeceb%22%5D%0D%0AN41%20%5Blabel%3D%22runtime%5Cnnewobject%5Cn0.06s%20(0.2%25)%5Cnof%200.30s%20(1.01%25)%22%20id%3D%22node41%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22runtime.newobject%20(0.30s)%22%20color%3D%22%23b2b0a9%22%20fillcolor%3D%22%23edeceb%22%5D%0D%0AN42%20%5Blabel%3D%22shaderir%5Cn(*Program)%5CnFilterUniformVariables%5Cn0.20s%20(0.67%25)%22%20id%3D%22node42%22%20fontsize%3D10%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fshaderir.(*Program).FilterUniformVariables%20(0.20s)%22%20color%3D%22%23b2b1ac%22%20fillcolor%3D%22%23edecec%22%5D%0D%0AN43%20%5Blabel%3D%22ebiten%5Cn(*Image)%5CninvokeUsageCallbacks%5Cnfunc1%5Cn0.15s%20(0.5%25)%5Cnof%200.24s%20(0.8%25)%22%20id%3D%22node43%22%20fontsize%3D10%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).invokeUsageCallbacks.func1%20(0.24s)%22%20color%3D%22%23b2b0ab%22%20fillcolor%3D%22%23edecec%22%5D%0D%0AN44%20%5Blabel%3D%22maps%5CnctrlGroup%5CnmatchH2%5Cn0.17s%20(0.57%25)%22%20id%3D%22node44%22%20fontsize%3D10%20shape%3Dbox%20tooltip%3D%22internal%2Fruntime%2Fmaps.ctrlGroup.matchH2%20(0.17s)%22%20color%3D%22%23b2b1ad%22%20fillcolor%3D%22%23ededec%22%5D%0D%0AN45%20%5Blabel%3D%22runtime%5Cnsystemstack%5Cn0%20of%200.17s%20(0.57%25)%22%20id%3D%22node45%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22runtime.systemstack%20(0.17s)%22%20color%3D%22%23b2b1ad%22%20fillcolor%3D%22%23ededec%22%5D%0D%0AN46%20%5Blabel%3D%22runtime%5Cnmemhash128%5Cn0.06s%20(0.2%25)%5Cnof%200.29s%20(0.97%25)%22%20id%3D%22node46%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22runtime.memhash128%20(0.29s)%22%20color%3D%22%23b2b0a9%22%20fillcolor%3D%22%23edeceb%22%5D%0D%0AN47%20%5Blabel%3D%22runtime%5CnmallocgcSmallScanNoHeader%5Cn0.02s%20(0.067%25)%5Cnof%200.16s%20(0.54%25)%22%20id%3D%22node47%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22runtime.mallocgcSmallScanNoHeader%20(0.16s)%22%20color%3D%22%23b2b1ad%22%20fillcolor%3D%22%23ededec%22%5D%0D%0AN48%20%5Blabel%3D%22graphics%5CnQuadVerticesFromSrcAndMatrix%5Cn0.05s%20(0.17%25)%5Cnof%200.30s%20(1.01%25)%22%20id%3D%22node48%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphics.QuadVerticesFromSrcAndMatrix%20(0.30s)%22%20color%3D%22%23b2b0a9%22%20fillcolor%3D%22%23edeceb%22%5D%0D%0AN49%20%5Blabel%3D%22spatial%5Cn(*Hash%5B*main%5CnFood%5D)%5CnPointsIter%5Cn(*Hash%5Bgo%5Cnshape%5Cn*uint8%5D)%5CnPointsIter%5Cnfunc1%5Cn0.01s%20(0.034%25)%5Cnof%201.30s%20(4.36%25)%22%20id%3D%22node49%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Food%5D).PointsIter.(*Hash%5Bgo.shape.*uint8%5D).PointsIter.func1%20(1.30s)%22%20color%3D%22%23b2a38b%22%20fillcolor%3D%22%23edebe7%22%5D%0D%0AN50%20%5Blabel%3D%22graphicscommand%5Cn(*drawTrianglesCommand)%5CnCanMergeWithDrawTrianglesCommand%5Cn0.06s%20(0.2%25)%5Cnof%200.18s%20(0.6%25)%22%20id%3D%22node50%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*drawTrianglesCommand).CanMergeWithDrawTrianglesCommand%20(0.18s)%22%20color%3D%22%23b2b1ad%22%20fillcolor%3D%22%23edecec%22%5D%0D%0AN51%20%5Blabel%3D%22graphicscommand%5Cn(*Image)%5CnDrawTriangles%5Cn0.03s%20(0.1%25)%5Cnof%200.87s%20(2.91%25)%22%20id%3D%22node51%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*Image).DrawTriangles%20(0.87s)%22%20color%3D%22%23b2a998%22%20fillcolor%3D%22%23edebe9%22%5D%0D%0AN52%20%5Blabel%3D%22graphicscommand%5Cn(*commandQueueManager)%5CnenqueueDrawTrianglesCommand%5Cn0.03s%20(0.1%25)%5Cnof%200.80s%20(2.68%25)%22%20id%3D%22node52%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueueManager).enqueueDrawTrianglesCommand%20(0.80s)%22%20color%3D%22%23b2aa9a%22%20fillcolor%3D%22%23edece9%22%5D%0D%0AN53%20%5Blabel%3D%22ui%5Cn(*UserInterface)%5CnupdateInputStateForFrameImpl%5Cn0%20of%200.20s%20(0.67%25)%22%20id%3D%22node53%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*UserInterface).updateInputStateForFrameImpl%20(0.20s)%22%20color%3D%22%23b2b1ac%22%20fillcolor%3D%22%23edecec%22%5D%0D%0AN54%20%5Blabel%3D%22vector%5CnStrokeLine%5Cn0.02s%20(0.067%25)%5Cnof%201.86s%20(6.23%25)%22%20id%3D%22node54%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Fvector.StrokeLine%20(1.86s)%22%20color%3D%22%23b29a7a%22%20fillcolor%3D%22%23ede9e5%22%5D%0D%0AN55%20%5Blabel%3D%22graphicscommand%5Cn(*commandQueue)%5CnprependPreservedUniforms%5Cn0%20of%200.19s%20(0.64%25)%22%20id%3D%22node55%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).prependPreservedUniforms%20(0.19s)%22%20color%3D%22%23b2b1ac%22%20fillcolor%3D%22%23edecec%22%5D%0D%0AN56%20%5Blabel%3D%22main%5Cn(*Game)%5CndrawFood-range1%5Cn0.01s%20(0.034%25)%5Cnof%201.28s%20(4.29%25)%22%20id%3D%22node56%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22main.(*Game).drawFood-range1%20(1.28s)%22%20color%3D%22%23b2a38c%22%20fillcolor%3D%22%23edebe8%22%5D%0D%0AN57%20%5Blabel%3D%22atlas%5Cn(*Image)%5CnDrawTriangles%5Cn0.02s%20(0.067%25)%5Cnof%201.38s%20(4.62%25)%22%20id%3D%22node57%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).DrawTriangles%20(1.38s)%22%20color%3D%22%23b2a289%22%20fillcolor%3D%22%23edeae7%22%5D%0D%0AN58%20%5Blabel%3D%22vector%5CnFillRect%5Cn0.02s%20(0.067%25)%5Cnof%201.25s%20(4.19%25)%22%20id%3D%22node58%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Fvector.FillRect%20(1.25s)%22%20color%3D%22%23b2a48d%22%20fillcolor%3D%22%23edebe8%22%5D%0D%0AN59%20%5Blabel%3D%22ui%5Cn(*UserInterface)%5CnloopGame%5Cn0.01s%20(0.034%25)%5Cnof%209.36s%20(31.36%25)%22%20id%3D%22node59%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*UserInterface).loopGame%20(9.36s)%22%20color%3D%22%23b23400%22%20fillcolor%3D%22%23eddcd5%22%5D%0D%0AN60%20%5Blabel%3D%22ui%5Cn(*UserInterface)%5Cnupdate%5Cn0%20of%200.37s%20(1.24%25)%22%20id%3D%22node60%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*UserInterface).update%20(0.37s)%22%20color%3D%22%23b2afa7%22%20fillcolor%3D%22%23edeceb%22%5D%0D%0AN61%20%5Blabel%3D%22atlas%5Cn(*Image)%5CnwritePixels%5Cnfunc2%5Cn0.01s%20(0.034%25)%5Cnof%200.81s%20(2.71%25)%22%20id%3D%22node61%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).writePixels.func2%20(0.81s)%22%20color%3D%22%23b2aa9a%22%20fillcolor%3D%22%23edece9%22%5D%0D%0AN62%20%5Blabel%3D%22graphicscommand%5Cn(*writePixelsCommand)%5CnExec%5Cn0%20of%201.09s%20(3.65%25)%22%20id%3D%22node62%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*writePixelsCommand).Exec%20(1.09s)%22%20color%3D%22%23b2a691%22%20fillcolor%3D%22%23edebe8%22%5D%0D%0AN63%20%5Blabel%3D%22runtime%5Cnnotewakeup%5Cn0.01s%20(0.034%25)%5Cnof%200.17s%20(0.57%25)%22%20id%3D%22node63%22%20fontsize%3D9%20shape%3Dbox%20tooltip%3D%22runtime.notewakeup%20(0.17s)%22%20color%3D%22%23b2b1ad%22%20fillcolor%3D%22%23ededec%22%5D%0D%0AN64%20%5Blabel%3D%22runtime%5Cnsemawakeup%5Cn0%20of%200.17s%20(0.57%25)%22%20id%3D%22node64%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22runtime.semawakeup%20(0.17s)%22%20color%3D%22%23b2b1ad%22%20fillcolor%3D%22%23ededec%22%5D%0D%0AN65%20%5Blabel%3D%22ebiten%5Cn(*Image)%5CnWritePixels%5Cn0%20of%200.82s%20(2.75%25)%22%20id%3D%22node65%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).WritePixels%20(0.82s)%22%20color%3D%22%23b2aa99%22%20fillcolor%3D%22%23edece9%22%5D%0D%0AN66%20%5Blabel%3D%22ebiten%5Cn(*gameForUI)%5CnDrawOffscreen%5Cn0%20of%205.08s%20(17.02%25)%22%20id%3D%22node66%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*gameForUI).DrawOffscreen%20(5.08s)%22%20color%3D%22%23b2591a%22%20fillcolor%3D%22%23ede1d8%22%5D%0D%0AN67%20%5Blabel%3D%22ebiten%5Cn(*gameForUI)%5CnUpdate%5Cn0%20of%204.25s%20(14.24%25)%22%20id%3D%22node67%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*gameForUI).Update%20(4.25s)%22%20color%3D%22%23b26b33%22%20fillcolor%3D%22%23ede3dc%22%5D%0D%0AN68%20%5Blabel%3D%22ebiten%5CnRunGame%5Cn0%20of%200.83s%20(2.78%25)%22%20id%3D%22node68%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.RunGame%20(0.83s)%22%20color%3D%22%23b2aa99%22%20fillcolor%3D%22%23edece9%22%5D%0D%0AN69%20%5Blabel%3D%22ebiten%5CnRunGameWithOptions%5Cn0%20of%200.83s%20(2.78%25)%22%20id%3D%22node69%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.RunGameWithOptions%20(0.83s)%22%20color%3D%22%23b2aa99%22%20fillcolor%3D%22%23edece9%22%5D%0D%0AN70%20%5Blabel%3D%22ebitenutil%5CnDebugPrint%5Cn0%20of%200.20s%20(0.67%25)%22%20id%3D%22node70%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Febitenutil.DebugPrint%20(0.20s)%22%20color%3D%22%23b2b1ac%22%20fillcolor%3D%22%23edecec%22%5D%0D%0AN71%20%5Blabel%3D%22ebitenutil%5CnDebugPrintAt%5Cn0%20of%200.20s%20(0.67%25)%22%20id%3D%22node71%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Febitenutil.DebugPrintAt%20(0.20s)%22%20color%3D%22%23b2b1ac%22%20fillcolor%3D%22%23edecec%22%5D%0D%0AN72%20%5Blabel%3D%22ebitenutil%5CndrawDebugText%5Cn0%20of%200.20s%20(0.67%25)%22%20id%3D%22node72%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Febitenutil.drawDebugText%20(0.20s)%22%20color%3D%22%23b2b1ac%22%20fillcolor%3D%22%23edecec%22%5D%0D%0AN73%20%5Blabel%3D%22atlas%5Cn(*Image)%5CnWritePixels%5Cn0%20of%200.81s%20(2.71%25)%22%20id%3D%22node73%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).WritePixels%20(0.81s)%22%20color%3D%22%23b2aa9a%22%20fillcolor%3D%22%23edece9%22%5D%0D%0AN74%20%5Blabel%3D%22atlas%5Cn(*Image)%5CnwritePixels%5Cn0%20of%200.81s%20(2.71%25)%22%20id%3D%22node74%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).writePixels%20(0.81s)%22%20color%3D%22%23b2aa9a%22%20fillcolor%3D%22%23edece9%22%5D%0D%0AN75%20%5Blabel%3D%22buffered%5Cn(*Image)%5CnWritePixels%5Cn0%20of%200.81s%20(2.71%25)%22%20id%3D%22node75%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fbuffered.(*Image).WritePixels%20(0.81s)%22%20color%3D%22%23b2aa9a%22%20fillcolor%3D%22%23edece9%22%5D%0D%0AN76%20%5Blabel%3D%22glfw%5CnPollEvents%5Cn0%20of%200.35s%20(1.17%25)%22%20id%3D%22node76%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fglfw.PollEvents%20(0.35s)%22%20color%3D%22%23b2afa8%22%20fillcolor%3D%22%23edeceb%22%5D%0D%0AN77%20%5Blabel%3D%22glfw%5Cn_GetKeyState%5Cn0%20of%200.18s%20(0.6%25)%22%20id%3D%22node77%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fglfw._GetKeyState%20(0.18s)%22%20color%3D%22%23b2b1ad%22%20fillcolor%3D%22%23edecec%22%5D%0D%0AN78%20%5Blabel%3D%22graphics%5CnNewManagedBytes%5Cn0%20of%200.81s%20(2.71%25)%22%20id%3D%22node78%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphics.NewManagedBytes%20(0.81s)%22%20color%3D%22%23b2aa9a%22%20fillcolor%3D%22%23edece9%22%5D%0D%0AN79%20%5Blabel%3D%22graphicscommand%5Cn(*commandQueue)%5CnFlush%5Cnfunc1%5Cn0%20of%2019.34s%20(64.79%25)%22%20id%3D%22node79%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).Flush.func1%20(19.34s)%22%20color%3D%22%23b21500%22%20fillcolor%3D%22%23edd8d5%22%5D%0D%0AN80%20%5Blabel%3D%22graphicscommand%5Cn(*commandQueue)%5Cnflush%5Cnfunc1%5Cn0%20of%2018.11s%20(60.67%25)%22%20id%3D%22node80%22%20fontsize%3D8%20shape%3Dbox%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).flush.func1%20(18.11s)%22%20color%3D%22%23b21800%22%20fillcolor%3D%22%23edd8d5%22%5D%0D%0AN10%20-%3E%20N8%20%5Blabel%3D%22%2020.18s%22%20weight%3D68%20penwidth%3D4%20color%3D%22%23b21300%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fthread.(*OSThread).Loop%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fthread.(*OSThread).Loop.func1%20(20.18s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fthread.(*OSThread).Loop%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fthread.(*OSThread).Loop.func1%20(20.18s)%22%5D%0D%0AN3%20-%3E%20N2%20%5Blabel%3D%22%2020.07s%22%20weight%3D68%20penwidth%3D4%20color%3D%22%23b21400%22%20tooltip%3D%22runtime.syscall_syscalln%20-%3E%20runtime.cgocall%20(20.07s)%22%20labeltooltip%3D%22runtime.syscall_syscalln%20-%3E%20runtime.cgocall%20(20.07s)%22%5D%0D%0AN1%20-%3E%20N10%20%5Blabel%3D%22%2019.35s%22%20weight%3D65%20penwidth%3D4%20color%3D%22%23b21500%22%20tooltip%3D%22golang.org%2Fx%2Fsync%2Ferrgroup.(*Group).Go.func1%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fthread.(*OSThread).Loop%20(19.35s)%22%20labeltooltip%3D%22golang.org%2Fx%2Fsync%2Ferrgroup.(*Group).Go.func1%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fthread.(*OSThread).Loop%20(19.35s)%22%20style%3D%22dotted%22%5D%0D%0AN79%20-%3E%20N7%20%5Blabel%3D%22%2019.34s%22%20weight%3D65%20penwidth%3D4%20color%3D%22%23b21500%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).Flush.func1%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).flush%20(19.34s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).Flush.func1%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).flush%20(19.34s)%22%5D%0D%0AN8%20-%3E%20N79%20%5Blabel%3D%22%2019.34s%22%20weight%3D65%20penwidth%3D4%20color%3D%22%23b21500%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fthread.(*OSThread).Loop.func1%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).Flush.func1%20(19.34s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fthread.(*OSThread).Loop.func1%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).Flush.func1%20(19.34s)%22%5D%0D%0AN12%20-%3E%20N3%20%5Blabel%3D%22%2018.53s%22%20weight%3D63%20penwidth%3D4%20color%3D%22%23b21700%22%20tooltip%3D%22syscall.Syscall%20-%3E%20runtime.syscall_syscalln%20(18.53s)%22%20labeltooltip%3D%22syscall.Syscall%20-%3E%20runtime.syscall_syscalln%20(18.53s)%22%5D%0D%0AN7%20-%3E%20N80%20%5Blabel%3D%22%2018.11s%22%20weight%3D61%20penwidth%3D4%20color%3D%22%23b21800%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).flush%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).flush.func1%20(18.11s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).flush%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).flush.func1%20(18.11s)%22%5D%0D%0AN80%20-%3E%20N12%20%5Blabel%3D%22%2018.11s%22%20weight%3D61%20penwidth%3D4%20color%3D%22%23b21800%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).flush.func1%20...%20syscall.Syscall%20(18.11s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).flush.func1%20...%20syscall.Syscall%20(18.11s)%22%20style%3D%22dotted%22%5D%0D%0AN1%20-%3E%20N59%20%5Blabel%3D%22%209.36s%22%20weight%3D32%20penwidth%3D2%20color%3D%22%23b23400%22%20tooltip%3D%22golang.org%2Fx%2Fsync%2Ferrgroup.(*Group).Go.func1%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*UserInterface).loopGame%20(9.36s)%22%20labeltooltip%3D%22golang.org%2Fx%2Fsync%2Ferrgroup.(*Group).Go.func1%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*UserInterface).loopGame%20(9.36s)%22%20style%3D%22dotted%22%5D%0D%0AN59%20-%3E%20N4%20%5Blabel%3D%22%209.34s%22%20weight%3D32%20penwidth%3D2%20color%3D%22%23b23400%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*UserInterface).loopGame%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*context).updateFrameImpl%20(9.34s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*UserInterface).loopGame%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*context).updateFrameImpl%20(9.34s)%22%20style%3D%22dotted%22%5D%0D%0AN66%20-%3E%20N19%20%5Blabel%3D%22%205.08s%22%20weight%3D18%20color%3D%22%23b2591a%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*gameForUI).DrawOffscreen%20-%3E%20main.(*Game).Draw%20(5.08s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*gameForUI).DrawOffscreen%20-%3E%20main.(*Game).Draw%20(5.08s)%22%5D%0D%0AN4%20-%3E%20N66%20%5Blabel%3D%22%205.08s%22%20weight%3D18%20color%3D%22%23b2591a%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*context).updateFrameImpl%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2.(*gameForUI).DrawOffscreen%20(5.08s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*context).updateFrameImpl%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2.(*gameForUI).DrawOffscreen%20(5.08s)%22%20style%3D%22dotted%22%5D%0D%0AN19%20-%3E%20N6%20%5Blabel%3D%22%204.86s%22%20weight%3D17%20color%3D%22%23b25e21%22%20tooltip%3D%22main.(*Game).Draw%20-%3E%20main.drawWorldSpace%20(4.86s)%22%20labeltooltip%3D%22main.(*Game).Draw%20-%3E%20main.drawWorldSpace%20(4.86s)%22%5D%0D%0AN67%20-%3E%20N21%20%5Blabel%3D%22%204.25s%22%20weight%3D15%20color%3D%22%23b26b33%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*gameForUI).Update%20-%3E%20main.(*Game).Update%20(4.25s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*gameForUI).Update%20-%3E%20main.(*Game).Update%20(4.25s)%22%5D%0D%0AN4%20-%3E%20N67%20%5Blabel%3D%22%204.25s%22%20weight%3D15%20color%3D%22%23b26b33%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*context).updateFrameImpl%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2.(*gameForUI).Update%20(4.25s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*context).updateFrameImpl%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2.(*gameForUI).Update%20(4.25s)%22%5D%0D%0AN21%20-%3E%20N11%20%5Blabel%3D%22%204.08s%22%20weight%3D14%20color%3D%22%23b26f38%22%20tooltip%3D%22main.(*Game).Update%20-%3E%20main.(*Game).updateAnts%20(4.08s)%22%20labeltooltip%3D%22main.(*Game).Update%20-%3E%20main.(*Game).updateAnts%20(4.08s)%22%5D%0D%0AN11%20-%3E%20N9%20%5Blabel%3D%22%202.94s%22%20weight%3D10%20color%3D%22%23b2865a%22%20tooltip%3D%22main.(*Game).updateAnts%20-%3E%20github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Pheromone%5D).RadialSearchIter.(*Hash%5Bgo.shape.*uint8%5D).RadialSearchIter.func1%20(2.94s)%22%20labeltooltip%3D%22main.(*Game).updateAnts%20-%3E%20github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Pheromone%5D).RadialSearchIter.(*Hash%5Bgo.shape.*uint8%5D).RadialSearchIter.func1%20(2.94s)%22%5D%0D%0AN6%20-%3E%20N36%20%5Blabel%3D%22%201.95s%22%20weight%3D7%20color%3D%22%23b29878%22%20tooltip%3D%22main.drawWorldSpace%20-%3E%20main.(*Game).drawAnts%20(1.95s)%22%20labeltooltip%3D%22main.drawWorldSpace%20-%3E%20main.(*Game).drawAnts%20(1.95s)%22%5D%0D%0AN36%20-%3E%20N54%20%5Blabel%3D%22%201.86s%22%20weight%3D7%20color%3D%22%23b29a7a%22%20tooltip%3D%22main.(*Game).drawAnts%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Fvector.StrokeLine%20(1.86s)%22%20labeltooltip%3D%22main.(*Game).drawAnts%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Fvector.StrokeLine%20(1.86s)%22%5D%0D%0AN5%20-%3E%20N30%20%5Blabel%3D%22%201.79s%22%20weight%3D6%20color%3D%22%23b29b7c%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).DrawImage%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*Image).DrawTriangles%20(1.79s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).DrawImage%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*Image).DrawTriangles%20(1.79s)%22%5D%0D%0AN30%20-%3E%20N26%20%5Blabel%3D%22%201.71s%22%20weight%3D6%20color%3D%22%23b29c7f%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*Image).DrawTriangles%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fmipmap.(*Mipmap).DrawTriangles%20(1.71s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*Image).DrawTriangles%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fmipmap.(*Mipmap).DrawTriangles%20(1.71s)%22%5D%0D%0AN54%20-%3E%20N5%20%5Blabel%3D%22%201.63s%22%20weight%3D6%20color%3D%22%23b29e81%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Fvector.StrokeLine%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).DrawImage%20(1.63s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Fvector.StrokeLine%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).DrawImage%20(1.63s)%22%5D%0D%0AN6%20-%3E%20N15%20%5Blabel%3D%22%201.59s%22%20weight%3D6%20color%3D%22%23b29e82%22%20tooltip%3D%22main.drawWorldSpace%20-%3E%20main.(*Game).drawPheromones%20(1.59s)%22%20labeltooltip%3D%22main.drawWorldSpace%20-%3E%20main.(*Game).drawPheromones%20(1.59s)%22%5D%0D%0AN26%20-%3E%20N29%20%5Blabel%3D%22%201.50s%22%20weight%3D6%20color%3D%22%23b2a085%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fmipmap.(*Mipmap).DrawTriangles%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fbuffered.(*Image).DrawTriangles%20(1.50s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fmipmap.(*Mipmap).DrawTriangles%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fbuffered.(*Image).DrawTriangles%20(1.50s)%22%5D%0D%0AN29%20-%3E%20N57%20%5Blabel%3D%22%201.38s%22%20weight%3D5%20color%3D%22%23b2a289%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fbuffered.(*Image).DrawTriangles%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).DrawTriangles%20(1.38s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fbuffered.(*Image).DrawTriangles%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).DrawTriangles%20(1.38s)%22%5D%0D%0AN49%20-%3E%20N56%20%5Blabel%3D%22%201.28s%22%20weight%3D5%20color%3D%22%23b2a38c%22%20tooltip%3D%22github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Food%5D).PointsIter.(*Hash%5Bgo.shape.*uint8%5D).PointsIter.func1%20-%3E%20main.(*Game).drawFood-range1%20(1.28s)%22%20labeltooltip%3D%22github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Food%5D).PointsIter.(*Hash%5Bgo.shape.*uint8%5D).PointsIter.func1%20-%3E%20main.(*Game).drawFood-range1%20(1.28s)%22%5D%0D%0AN6%20-%3E%20N49%20%5Blabel%3D%22%201.28s%22%20weight%3D5%20color%3D%22%23b2a38c%22%20tooltip%3D%22main.drawWorldSpace%20...%20github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Food%5D).PointsIter.(*Hash%5Bgo.shape.*uint8%5D).PointsIter.func1%20(1.28s)%22%20labeltooltip%3D%22main.drawWorldSpace%20...%20github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Food%5D).PointsIter.(*Hash%5Bgo.shape.*uint8%5D).PointsIter.func1%20(1.28s)%22%20style%3D%22dotted%22%5D%0D%0AN57%20-%3E%20N20%20%5Blabel%3D%22%201.27s%22%20weight%3D5%20color%3D%22%23b2a38c%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).DrawTriangles%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).drawTriangles%20(1.27s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).DrawTriangles%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).drawTriangles%20(1.27s)%22%5D%0D%0AN56%20-%3E%20N58%20%5Blabel%3D%22%201.25s%22%20weight%3D5%20color%3D%22%23b2a48d%22%20tooltip%3D%22main.(*Game).drawFood-range1%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Fvector.FillRect%20(1.25s)%22%20labeltooltip%3D%22main.(*Game).drawFood-range1%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Fvector.FillRect%20(1.25s)%22%5D%0D%0AN58%20-%3E%20N5%20%5Blabel%3D%22%201.21s%22%20weight%3D5%20color%3D%22%23b2a48e%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Fvector.FillRect%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).DrawImage%20(1.21s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Fvector.FillRect%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).DrawImage%20(1.21s)%22%5D%0D%0AN7%20-%3E%20N62%20%5Blabel%3D%22%201.09s%22%20weight%3D4%20color%3D%22%23b2a691%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).flush%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*writePixelsCommand).Exec%20(1.09s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).flush%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*writePixelsCommand).Exec%20(1.09s)%22%5D%0D%0AN62%20-%3E%20N3%20%5Blabel%3D%22%201.08s%22%20weight%3D4%20color%3D%22%23b2a692%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*writePixelsCommand).Exec%20...%20runtime.syscall_syscalln%20(1.08s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*writePixelsCommand).Exec%20...%20runtime.syscall_syscalln%20(1.08s)%22%20style%3D%22dotted%22%5D%0D%0AN9%20-%3E%20N18%20%5Blabel%3D%22%200.98s%22%20weight%3D4%20color%3D%22%23b2a795%22%20tooltip%3D%22github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Pheromone%5D).RadialSearchIter.(*Hash%5Bgo.shape.*uint8%5D).RadialSearchIter.func1%20-%3E%20main.(*Game).updateAnts-range1%20(0.98s)%22%20labeltooltip%3D%22github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Pheromone%5D).RadialSearchIter.(*Hash%5Bgo.shape.*uint8%5D).RadialSearchIter.func1%20-%3E%20main.(*Game).updateAnts-range1%20(0.98s)%22%5D%0D%0AN20%20-%3E%20N31%20%5Blabel%3D%22%200.97s%22%20weight%3D4%20color%3D%22%23b2a895%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).drawTriangles%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Frestorable.(*Image).DrawTriangles%20(0.97s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).drawTriangles%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Frestorable.(*Image).DrawTriangles%20(0.97s)%22%5D%0D%0AN31%20-%3E%20N51%20%5Blabel%3D%22%200.87s%22%20weight%3D3%20color%3D%22%23b2a998%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Frestorable.(*Image).DrawTriangles%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*Image).DrawTriangles%20(0.87s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Frestorable.(*Image).DrawTriangles%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*Image).DrawTriangles%20(0.87s)%22%5D%0D%0AN68%20-%3E%20N69%20%5Blabel%3D%22%200.83s%22%20weight%3D3%20color%3D%22%23b2aa99%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.RunGame%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2.RunGameWithOptions%20(0.83s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.RunGame%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2.RunGameWithOptions%20(0.83s)%22%5D%0D%0AN69%20-%3E%20N10%20%5Blabel%3D%22%200.83s%22%20weight%3D3%20color%3D%22%23b2aa99%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.RunGameWithOptions%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fthread.(*OSThread).Loop%20(0.83s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.RunGameWithOptions%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fthread.(*OSThread).Loop%20(0.83s)%22%20style%3D%22dotted%22%5D%0D%0AN25%20-%3E%20N68%20%5Blabel%3D%22%200.83s%5Cn%20(inline)%22%20weight%3D3%20color%3D%22%23b2aa99%22%20tooltip%3D%22runtime.main%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2.RunGame%20(0.83s)%22%20labeltooltip%3D%22runtime.main%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2.RunGame%20(0.83s)%22%20style%3D%22dotted%22%5D%0D%0AN15%20-%3E%20N65%20%5Blabel%3D%22%200.82s%22%20weight%3D3%20color%3D%22%23b2aa99%22%20tooltip%3D%22main.(*Game).drawPheromones%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).WritePixels%20(0.82s)%22%20labeltooltip%3D%22main.(*Game).drawPheromones%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).WritePixels%20(0.82s)%22%5D%0D%0AN65%20-%3E%20N75%20%5Blabel%3D%22%200.81s%22%20weight%3D3%20color%3D%22%23b2aa9a%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).WritePixels%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fbuffered.(*Image).WritePixels%20(0.81s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).WritePixels%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fbuffered.(*Image).WritePixels%20(0.81s)%22%20style%3D%22dotted%22%5D%0D%0AN73%20-%3E%20N74%20%5Blabel%3D%22%200.81s%22%20weight%3D3%20color%3D%22%23b2aa9a%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).WritePixels%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).writePixels%20(0.81s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).WritePixels%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).writePixels%20(0.81s)%22%5D%0D%0AN74%20-%3E%20N78%20%5Blabel%3D%22%200.81s%22%20weight%3D3%20color%3D%22%23b2aa9a%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).writePixels%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphics.NewManagedBytes%20(0.81s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).writePixels%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphics.NewManagedBytes%20(0.81s)%22%5D%0D%0AN75%20-%3E%20N73%20%5Blabel%3D%22%200.81s%22%20weight%3D3%20color%3D%22%23b2aa9a%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fbuffered.(*Image).WritePixels%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).WritePixels%20(0.81s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fbuffered.(*Image).WritePixels%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).WritePixels%20(0.81s)%22%5D%0D%0AN78%20-%3E%20N61%20%5Blabel%3D%22%200.81s%22%20weight%3D3%20color%3D%22%23b2aa9a%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphics.NewManagedBytes%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).writePixels.func2%20(0.81s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphics.NewManagedBytes%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).writePixels.func2%20(0.81s)%22%5D%0D%0AN51%20-%3E%20N52%20%5Blabel%3D%22%200.80s%22%20weight%3D3%20color%3D%22%23b2aa9a%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*Image).DrawTriangles%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueueManager).enqueueDrawTrianglesCommand%20(0.80s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*Image).DrawTriangles%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueueManager).enqueueDrawTrianglesCommand%20(0.80s)%22%5D%0D%0AN61%20-%3E%20N14%20%5Blabel%3D%22%200.79s%22%20weight%3D3%20color%3D%22%23b2aa9a%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).writePixels.func2%20-%3E%20runtime.memmove%20(0.79s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fatlas.(*Image).writePixels.func2%20-%3E%20runtime.memmove%20(0.79s)%22%5D%0D%0AN52%20-%3E%20N17%20%5Blabel%3D%22%200.77s%22%20weight%3D3%20color%3D%22%23b2aa9b%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueueManager).enqueueDrawTrianglesCommand%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).EnqueueDrawTrianglesCommand%20(0.77s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueueManager).enqueueDrawTrianglesCommand%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).EnqueueDrawTrianglesCommand%20(0.77s)%22%5D%0D%0AN16%20-%3E%20N23%20%5Blabel%3D%22%200.61s%22%20weight%3D3%20color%3D%22%23b2aca0%22%20tooltip%3D%22golang.org%2Fx%2Fsys%2Fwindows.(*LazyProc).Call%20-%3E%20golang.org%2Fx%2Fsys%2Fwindows.(*Proc).Call%20(0.61s)%22%20labeltooltip%3D%22golang.org%2Fx%2Fsys%2Fwindows.(*LazyProc).Call%20-%3E%20golang.org%2Fx%2Fsys%2Fwindows.(*Proc).Call%20(0.61s)%22%5D%0D%0AN5%20-%3E%20N28%20%5Blabel%3D%22%200.60s%22%20weight%3D3%20color%3D%22%23b2aca0%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).DrawImage%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).invokeUsageCallbacks%20(0.60s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).DrawImage%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).invokeUsageCallbacks%20(0.60s)%22%5D%0D%0AN9%20-%3E%20N13%20%5Blabel%3D%22%200.52s%22%20weight%3D2%20color%3D%22%23b2ada2%22%20tooltip%3D%22github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Pheromone%5D).RadialSearchIter.(*Hash%5Bgo.shape.*uint8%5D).RadialSearchIter.func1%20-%3E%20runtime.mapaccess2%20(0.52s)%22%20labeltooltip%3D%22github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Pheromone%5D).RadialSearchIter.(*Hash%5Bgo.shape.*uint8%5D).RadialSearchIter.func1%20-%3E%20runtime.mapaccess2%20(0.52s)%22%5D%0D%0AN15%20-%3E%20N22%20%5Blabel%3D%22%200.45s%22%20weight%3D2%20color%3D%22%23b2aea5%22%20tooltip%3D%22main.(*Game).drawPheromones%20...%20github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Pheromone%5D).PointsIter.(*Hash%5Bgo.shape.*uint8%5D).PointsIter.func1%20(0.45s)%22%20labeltooltip%3D%22main.(*Game).drawPheromones%20...%20github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Pheromone%5D).PointsIter.(*Hash%5Bgo.shape.*uint8%5D).PointsIter.func1%20(0.45s)%22%20style%3D%22dotted%22%5D%0D%0AN11%20-%3E%20N32%20%5Blabel%3D%22%200.40s%22%20weight%3D2%20color%3D%22%23b2afa6%22%20tooltip%3D%22main.(*Game).updateAnts%20-%3E%20github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Food%5D).RadialSearchIter.(*Hash%5Bgo.shape.*uint8%5D).RadialSearchIter.func1%20(0.40s)%22%20labeltooltip%3D%22main.(*Game).updateAnts%20-%3E%20github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Food%5D).RadialSearchIter.(*Hash%5Bgo.shape.*uint8%5D).RadialSearchIter.func1%20(0.40s)%22%5D%0D%0AN23%20-%3E%20N12%20%5Blabel%3D%22%200.39s%22%20weight%3D2%20color%3D%22%23b2afa6%22%20tooltip%3D%22golang.org%2Fx%2Fsys%2Fwindows.(*Proc).Call%20-%3E%20syscall.Syscall%20(0.39s)%22%20labeltooltip%3D%22golang.org%2Fx%2Fsys%2Fwindows.(*Proc).Call%20-%3E%20syscall.Syscall%20(0.39s)%22%5D%0D%0AN8%20-%3E%20N60%20%5Blabel%3D%22%200.37s%22%20weight%3D2%20color%3D%22%23b2afa7%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fthread.(*OSThread).Loop.func1%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*UserInterface).update%20(0.37s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fthread.(*OSThread).Loop.func1%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*UserInterface).update%20(0.37s)%22%20style%3D%22dotted%22%5D%0D%0AN76%20-%3E%20N40%20%5Blabel%3D%22%200.35s%22%20weight%3D2%20color%3D%22%23b2afa8%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fglfw.PollEvents%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fglfw.platformPollEvents%20(0.35s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fglfw.PollEvents%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fglfw.platformPollEvents%20(0.35s)%22%5D%0D%0AN60%20-%3E%20N76%20%5Blabel%3D%22%200.35s%5Cn%20(inline)%22%20weight%3D2%20color%3D%22%23b2afa8%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*UserInterface).update%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fglfw.PollEvents%20(0.35s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*UserInterface).update%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fglfw.PollEvents%20(0.35s)%22%5D%0D%0AN15%20-%3E%20N27%20%5Blabel%3D%22%200.32s%22%20weight%3D2%20color%3D%22%23b2b0a8%22%20tooltip%3D%22main.(*Game).drawPheromones%20-%3E%20runtime.memclrNoHeapPointers%20(0.32s)%22%20labeltooltip%3D%22main.(*Game).drawPheromones%20-%3E%20runtime.memclrNoHeapPointers%20(0.32s)%22%5D%0D%0AN37%20-%3E%20N3%20%5Blabel%3D%22%200.32s%22%20weight%3D2%20color%3D%22%23b2b0a8%22%20tooltip%3D%22syscall.Syscall6%20-%3E%20runtime.syscall_syscalln%20(0.32s)%22%20labeltooltip%3D%22syscall.Syscall6%20-%3E%20runtime.syscall_syscalln%20(0.32s)%22%5D%0D%0AN5%20-%3E%20N48%20%5Blabel%3D%22%200.30s%22%20weight%3D2%20color%3D%22%23b2b0a9%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).DrawImage%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphics.QuadVerticesFromSrcAndMatrix%20(0.30s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).DrawImage%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphics.QuadVerticesFromSrcAndMatrix%20(0.30s)%22%5D%0D%0AN13%20-%3E%20N46%20%5Blabel%3D%22%200.29s%22%20color%3D%22%23b2b0a9%22%20tooltip%3D%22runtime.mapaccess2%20-%3E%20runtime.memhash128%20(0.29s)%22%20labeltooltip%3D%22runtime.mapaccess2%20-%3E%20runtime.memhash128%20(0.29s)%22%5D%0D%0AN11%20-%3E%20N41%20%5Blabel%3D%22%200.28s%22%20color%3D%22%23b2b0aa%22%20tooltip%3D%22main.(*Game).updateAnts%20...%20runtime.newobject%20(0.28s)%22%20labeltooltip%3D%22main.(*Game).updateAnts%20...%20runtime.newobject%20(0.28s)%22%20style%3D%22dotted%22%5D%0D%0AN18%20-%3E%20N34%20%5Blabel%3D%22%200.28s%5Cn%20(inline)%22%20color%3D%22%23b2b0aa%22%20tooltip%3D%22main.(*Game).updateAnts-range1%20-%3E%20github.com%2Frafibayer%2Fants-again%2Fvector.Vector.CosineSimilarity%20(0.28s)%22%20labeltooltip%3D%22main.(*Game).updateAnts-range1%20-%3E%20github.com%2Frafibayer%2Fants-again%2Fvector.Vector.CosineSimilarity%20(0.28s)%22%5D%0D%0AN22%20-%3E%20N35%20%5Blabel%3D%22%200.27s%22%20color%3D%22%23b2b0aa%22%20tooltip%3D%22github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Pheromone%5D).PointsIter.(*Hash%5Bgo.shape.*uint8%5D).PointsIter.func1%20-%3E%20main.(*Game).drawPheromones.(*Game).drawPheromones.func1-range1%20(0.27s)%22%20labeltooltip%3D%22github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Pheromone%5D).PointsIter.(*Hash%5Bgo.shape.*uint8%5D).PointsIter.func1%20-%3E%20main.(*Game).drawPheromones.(*Game).drawPheromones.func1-range1%20(0.27s)%22%5D%0D%0AN48%20-%3E%20N33%20%5Blabel%3D%22%200.25s%5Cn%20(inline)%22%20color%3D%22%23b2b0ab%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphics.QuadVerticesFromSrcAndMatrix%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphics.adjustDestinationPixel%20(0.25s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphics.QuadVerticesFromSrcAndMatrix%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphics.adjustDestinationPixel%20(0.25s)%22%5D%0D%0AN8%20-%3E%20N16%20%5Blabel%3D%22%200.25s%22%20color%3D%22%23b2b0ab%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fthread.(*OSThread).Loop.func1%20...%20golang.org%2Fx%2Fsys%2Fwindows.(*LazyProc).Call%20(0.25s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fthread.(*OSThread).Loop.func1%20...%20golang.org%2Fx%2Fsys%2Fwindows.(*LazyProc).Call%20(0.25s)%22%20style%3D%22dotted%22%5D%0D%0AN32%20-%3E%20N13%20%5Blabel%3D%22%200.25s%22%20color%3D%22%23b2b0ab%22%20tooltip%3D%22github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Food%5D).RadialSearchIter.(*Hash%5Bgo.shape.*uint8%5D).RadialSearchIter.func1%20-%3E%20runtime.mapaccess2%20(0.25s)%22%20labeltooltip%3D%22github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Food%5D).RadialSearchIter.(*Hash%5Bgo.shape.*uint8%5D).RadialSearchIter.func1%20-%3E%20runtime.mapaccess2%20(0.25s)%22%5D%0D%0AN28%20-%3E%20N43%20%5Blabel%3D%22%200.24s%22%20color%3D%22%23b2b0ab%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).invokeUsageCallbacks%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).invokeUsageCallbacks.func1%20(0.24s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).invokeUsageCallbacks%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).invokeUsageCallbacks.func1%20(0.24s)%22%5D%0D%0AN41%20-%3E%20N24%20%5Blabel%3D%22%200.24s%22%20color%3D%22%23b2b0ab%22%20tooltip%3D%22runtime.newobject%20-%3E%20runtime.mallocgc%20(0.24s)%22%20labeltooltip%3D%22runtime.newobject%20-%3E%20runtime.mallocgc%20(0.24s)%22%5D%0D%0AN46%20-%3E%20N38%20%5Blabel%3D%22%200.22s%22%20color%3D%22%23b2b0ab%22%20tooltip%3D%22runtime.memhash128%20-%3E%20aeshashbody%20(0.22s)%22%20labeltooltip%3D%22runtime.memhash128%20-%3E%20aeshashbody%20(0.22s)%22%5D%0D%0AN70%20-%3E%20N71%20%5Blabel%3D%22%200.20s%5Cn%20(inline)%22%20color%3D%22%23b2b1ac%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Febitenutil.DebugPrint%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Febitenutil.DebugPrintAt%20(0.20s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Febitenutil.DebugPrint%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Febitenutil.DebugPrintAt%20(0.20s)%22%5D%0D%0AN71%20-%3E%20N72%20%5Blabel%3D%22%200.20s%22%20color%3D%22%23b2b1ac%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Febitenutil.DebugPrintAt%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Febitenutil.drawDebugText%20(0.20s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Febitenutil.DebugPrintAt%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Febitenutil.drawDebugText%20(0.20s)%22%5D%0D%0AN17%20-%3E%20N42%20%5Blabel%3D%22%200.20s%22%20color%3D%22%23b2b1ac%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).EnqueueDrawTrianglesCommand%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fshaderir.(*Program).FilterUniformVariables%20(0.20s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).EnqueueDrawTrianglesCommand%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fshaderir.(*Program).FilterUniformVariables%20(0.20s)%22%5D%0D%0AN8%20-%3E%20N53%20%5Blabel%3D%22%200.20s%22%20color%3D%22%23b2b1ac%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fthread.(*OSThread).Loop.func1%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*UserInterface).updateInputStateForFrameImpl%20(0.20s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fthread.(*OSThread).Loop.func1%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*UserInterface).updateInputStateForFrameImpl%20(0.20s)%22%20style%3D%22dotted%22%5D%0D%0AN19%20-%3E%20N70%20%5Blabel%3D%22%200.20s%5Cn%20(inline)%22%20color%3D%22%23b2b1ac%22%20tooltip%3D%22main.(*Game).Draw%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Febitenutil.DebugPrint%20(0.20s)%22%20labeltooltip%3D%22main.(*Game).Draw%20...%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Febitenutil.DebugPrint%20(0.20s)%22%20style%3D%22dotted%22%5D%0D%0AN17%20-%3E%20N55%20%5Blabel%3D%22%200.19s%22%20color%3D%22%23b2b1ac%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).EnqueueDrawTrianglesCommand%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).prependPreservedUniforms%20(0.19s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).EnqueueDrawTrianglesCommand%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).prependPreservedUniforms%20(0.19s)%22%5D%0D%0AN72%20-%3E%20N5%20%5Blabel%3D%22%200.18s%22%20color%3D%22%23b2b1ad%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Febitenutil.drawDebugText%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).DrawImage%20(0.18s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Febitenutil.drawDebugText%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2.(*Image).DrawImage%20(0.18s)%22%5D%0D%0AN77%20-%3E%20N16%20%5Blabel%3D%22%200.18s%22%20color%3D%22%23b2b1ad%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fglfw._GetKeyState%20-%3E%20golang.org%2Fx%2Fsys%2Fwindows.(*LazyProc).Call%20(0.18s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fglfw._GetKeyState%20-%3E%20golang.org%2Fx%2Fsys%2Fwindows.(*LazyProc).Call%20(0.18s)%22%5D%0D%0AN40%20-%3E%20N77%20%5Blabel%3D%22%200.18s%5Cn%20(inline)%22%20color%3D%22%23b2b1ad%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fglfw.platformPollEvents%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fglfw._GetKeyState%20(0.18s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fglfw.platformPollEvents%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fglfw._GetKeyState%20(0.18s)%22%5D%0D%0AN17%20-%3E%20N50%20%5Blabel%3D%22%200.18s%22%20color%3D%22%23b2b1ad%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).EnqueueDrawTrianglesCommand%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*drawTrianglesCommand).CanMergeWithDrawTrianglesCommand%20(0.18s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).EnqueueDrawTrianglesCommand%20-%3E%20github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*drawTrianglesCommand).CanMergeWithDrawTrianglesCommand%20(0.18s)%22%5D%0D%0AN23%20-%3E%20N37%20%5Blabel%3D%22%200.17s%22%20color%3D%22%23b2b1ad%22%20tooltip%3D%22golang.org%2Fx%2Fsys%2Fwindows.(*Proc).Call%20-%3E%20syscall.Syscall6%20(0.17s)%22%20labeltooltip%3D%22golang.org%2Fx%2Fsys%2Fwindows.(*Proc).Call%20-%3E%20syscall.Syscall6%20(0.17s)%22%5D%0D%0AN13%20-%3E%20N44%20%5Blabel%3D%22%200.17s%5Cn%20(inline)%22%20color%3D%22%23b2b1ad%22%20tooltip%3D%22runtime.mapaccess2%20-%3E%20internal%2Fruntime%2Fmaps.ctrlGroup.matchH2%20(0.17s)%22%20labeltooltip%3D%22runtime.mapaccess2%20-%3E%20internal%2Fruntime%2Fmaps.ctrlGroup.matchH2%20(0.17s)%22%5D%0D%0AN64%20-%3E%20N39%20%5Blabel%3D%22%200.17s%22%20color%3D%22%23b2b1ad%22%20tooltip%3D%22runtime.semawakeup%20-%3E%20runtime.stdcall1%20(0.17s)%22%20labeltooltip%3D%22runtime.semawakeup%20-%3E%20runtime.stdcall1%20(0.17s)%22%5D%0D%0AN24%20-%3E%20N47%20%5Blabel%3D%22%200.16s%22%20color%3D%22%23b2b1ad%22%20tooltip%3D%22runtime.mallocgc%20-%3E%20runtime.mallocgcSmallScanNoHeader%20(0.16s)%22%20labeltooltip%3D%22runtime.mallocgc%20-%3E%20runtime.mallocgcSmallScanNoHeader%20(0.16s)%22%5D%0D%0AN63%20-%3E%20N64%20%5Blabel%3D%22%200.16s%22%20color%3D%22%23b2b1ad%22%20tooltip%3D%22runtime.notewakeup%20-%3E%20runtime.semawakeup%20(0.16s)%22%20labeltooltip%3D%22runtime.notewakeup%20-%3E%20runtime.semawakeup%20(0.16s)%22%5D%0D%0AN21%20-%3E%20N22%20%5Blabel%3D%22%200.15s%22%20color%3D%22%23b2b1ae%22%20tooltip%3D%22main.(*Game).Update%20...%20github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Pheromone%5D).PointsIter.(*Hash%5Bgo.shape.*uint8%5D).PointsIter.func1%20(0.15s)%22%20labeltooltip%3D%22main.(*Game).Update%20...%20github.com%2Frafibayer%2Fants-again%2Fspatial.(*Hash%5B*main.Pheromone%5D).PointsIter.(*Hash%5Bgo.shape.*uint8%5D).PointsIter.func1%20(0.15s)%22%20style%3D%22dotted%22%5D%0D%0AN2%20-%3E%20N16%20%5Blabel%3D%22%200.10s%22%20color%3D%22%23b2b1af%22%20tooltip%3D%22runtime.cgocall%20...%20golang.org%2Fx%2Fsys%2Fwindows.(*LazyProc).Call%20(0.10s)%22%20labeltooltip%3D%22runtime.cgocall%20...%20golang.org%2Fx%2Fsys%2Fwindows.(*LazyProc).Call%20(0.10s)%22%20style%3D%22dotted%22%5D%0D%0AN53%20-%3E%20N16%20%5Blabel%3D%22%200.09s%22%20color%3D%22%23b2b2af%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*UserInterface).updateInputStateForFrameImpl%20...%20golang.org%2Fx%2Fsys%2Fwindows.(*LazyProc).Call%20(0.09s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fui.(*UserInterface).updateInputStateForFrameImpl%20...%20golang.org%2Fx%2Fsys%2Fwindows.(*LazyProc).Call%20(0.09s)%22%20style%3D%22dotted%22%5D%0D%0AN45%20-%3E%20N63%20%5Blabel%3D%22%200.08s%22%20color%3D%22%23b2b2b0%22%20tooltip%3D%22runtime.systemstack%20...%20runtime.notewakeup%20(0.08s)%22%20labeltooltip%3D%22runtime.systemstack%20...%20runtime.notewakeup%20(0.08s)%22%20style%3D%22dotted%22%5D%0D%0AN7%20-%3E%20N14%20%5Blabel%3D%22%200.07s%22%20color%3D%22%23b2b2b0%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).flush%20...%20runtime.memmove%20(0.07s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).flush%20...%20runtime.memmove%20(0.07s)%22%20style%3D%22dotted%22%5D%0D%0AN17%20-%3E%20N14%20%5Blabel%3D%22%200.06s%22%20color%3D%22%23b2b2b0%22%20tooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).EnqueueDrawTrianglesCommand%20...%20runtime.memmove%20(0.06s)%22%20labeltooltip%3D%22github.com%2Fhajimehoshi%2Febiten%2Fv2%2Finternal%2Fgraphicscommand.(*commandQueue).EnqueueDrawTrianglesCommand%20...%20runtime.memmove%20(0.06s)%22%20style%3D%22dotted%22%5D%0D%0AN36%20-%3E%20N24%20%5Blabel%3D%22%200.04s%22%20color%3D%22%23b2b2b1%22%20tooltip%3D%22main.(*Game).drawAnts%20...%20runtime.mallocgc%20(0.04s)%22%20labeltooltip%3D%22main.(*Game).drawAnts%20...%20runtime.mallocgc%20(0.04s)%22%20style%3D%22dotted%22%5D%0D%0A%7D%0D%0A" target="_blank">
![CPU graphviz]({{ site.baseurl }}/images/ants/cpu.svg)
</a>

### Parameter optimization
As mentioned above, there are many tradeoffs to be made that result in vastly different ant behavior. There are many variations that produce stable simulations with different characteristics. It's possible to create very fast ants that find and forget paths quickly, or slow and steady ants that take a while to converge, but keep finding their way back to a food source until it is exhausted.

I spent a little bit of time trying to automate this fiddling with a rudimentary form of parameter optimization. 

Game parameters were factored into a single struct
```go
type Params struct {
    AntSpeed                       float64 
    AntRotation                    float64 
    AntPheromoneStart              int  
    PheromoneSenseRadius           float64 
    PheromoneSenseCosineSimilarity float64 
    PheromoneDecay                 float32
    PheromoneDropProb              float64 
    PheromoneInfluence             float64 
    PheromoneSenseProb             float64 
}
```

Then, we pick random values (within bounds) for each parameter, and run the game for a fixed number of ticks (180 * 60, 3 'simulation' minutes). For this, we can just run `Update` in a loop as fast as possible, and skip rendering entirely. 

Afterwards, we evaluate the performance of the random parameters based on how much food the ants collected. If we beat our previous best params, we print them out. We can run multiple samples for each set of parameters, and test multiple parameters in parallel. Go makes this pretty easy, especially with a little bit of ChatGPT help.

This is essentially a random search of the parameter space. It was useful to find interesting parameter presets, but didn't produce anything too groundbreaking.

An interesting future project might be applying a more sophisticated "machine-learning" approach here by using something like gradient descent, or ironically enough, [and-colony optimization](https://en.wikipedia.org/wiki/Ant_colony_optimization_algorithms).

# Lessons, challenges, closing thoughts
As I mentioned at the start, this wasn't my first time trying to simulate ants and pheromones. There are a ton of tradeoffs and alternative strategies to choose, and that makes it difficult to find and tune an approach enough to get a stable simulation. A few of those choices include:
- discrete pheromones vs. diffusing pheromone field
- pheromones as points vs. vectors
- spatial data structures
- continuous vs. discrete position representations
- random movement vs. pheromone influence

In the future, I think it would be neat to include some sliders and dropdowns to alter parameters and behavior of a running simulation.

Those who know me would probably say I'm at least skeptical of AI tools, but ChatGPT was a pretty invaluable source for brainstorming solutions to problems I encountered along the way, and optimizing inefficient strategies. Other than that, a huge thank you to the implementors of similar projects whose games and code I looked at extensively while creating this project. I've tried to include links to all of them below.

# Sources
- [Sebastian Lague](https://www.youtube.com/watch?v=X-iSQQgOd1A)
- [Forrest O](https://openprocessing.org/sketch/15109/)
- [bones-ai](https://github.com/bones-ai/rust-ants-colony-simulation)